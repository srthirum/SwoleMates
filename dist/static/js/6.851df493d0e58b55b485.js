webpackJsonp([6],{"0jXR":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("NHnr"),i=r("yviF"),n=r.n(i),o={data:function(){return{friendRequests:[],alert:!1}},created:function(){var e=this;this.$bind("friendRequests",s.fsdb.collection("users").doc(this.$store.state.user.uid).collection("requests").orderBy("created","desc")).then(function(t){e.friendRequests})},methods:{addFriend:function(e){var t=this;s.fsdb.collection("users").doc(this.$store.state.user.uid).collection("friends").doc(e).set({uid:e,created:n.a.firestore.FieldValue.serverTimestamp()}),s.fsdb.collection("users").doc(e).collection("friends").doc(this.$store.state.user.uid).set({uid:this.$store.state.user.uid,created:n.a.firestore.FieldValue.serverTimestamp()}).then(function(){t.deleteFriendRequest(e),t.alert=!0}).catch(function(e){console.error("Error adding friend",e),t.$store.commit("setError",e.message)})},deleteFriendRequest:function(e){var t=this;s.fsdb.collection("users").doc(this.$store.state.user.uid).collection("requests").doc(e).delete().then(function(){s.fsdb.collection("users").doc(e).collection("requests").doc(t.$store.state.user.uid).delete()}).catch(function(e){console.error("Error deleting friend requests",e),t.$store.commit("setError",e.message)})},addUserInfoToFriendRequests:function(){var e=this;this.friendRequests.forEach(function(t){s.fsdb.collection("users").doc(t.uid).get().then(function(e){t.user=e.data()}).catch(function(t){console.error("Error getting user info",t),e.$store.commit("setError",t.message)})})}},computed:{error:function(){return this.$store.state.error},loading:function(){return this.$store.state.loading}},watch:{friendRequests:function(e){},error:function(e){e&&(this.alert=!0)},alert:function(e){e||this.$store.commit("setError",null)}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-layout",{attrs:{"justify-center":"",row:"",wrap:""}},[r("v-alert",{attrs:{type:"success",dismissible:"",outline:""},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[e._v("\n      You just made a friend :)\n    ")]),e._v(" "),r("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"","mt-5":""}},[r("h1",[e._v("Notifications")])]),e._v(" "),r("v-flex",{attrs:{md8:"","mt-5":""}},[r("v-list",[r("v-subheader",[e._v("Friend Requests")]),e._v(" "),e._l(e.friendRequests,function(t){return r("v-list-tile",{key:t.id,attrs:{avatar:""}},[r("router-link",{attrs:{to:/user/+t.uid}},[r("v-list-tile-avatar",[r("img",{attrs:{src:t.user.profPhotoUrl}})])],1),e._v(" "),r("v-list-tile-content",[r("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:/user/+t.uid}},[r("v-list-tile-title",{domProps:{innerHTML:e._s(t.user.username)}})],1)],1),e._v(" "),r("v-list-tile-action",{staticStyle:{"padding-right":"1em"}},[r("v-btn",{attrs:{color:"primary"},on:{click:function(r){e.addFriend(t.uid)}}},[e._v("\n              Confirm\n            ")])],1),e._v(" "),r("v-list-tile-action",[r("v-btn",{on:{click:function(r){e.deleteFriendRequest(t.uid)}}},[e._v("\n              Delete\n            ")])],1)],1)})],2)],1)],1)],1)},staticRenderFns:[]},u=r("VU/8")(o,c,!1,null,null,null);t.default=u.exports}});
//# sourceMappingURL=6.851df493d0e58b55b485.js.map